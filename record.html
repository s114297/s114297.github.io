<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>ç´€éŒ„é </title>

<style>
body{
  margin:0;
  font-family: "Arial", sans-serif;
  background:#d8cfc4; /* ä¸å¤ªæ·±çš„èƒŒæ™¯ */
}

h1{
  text-align:center;
  margin:20px 0;
}

.container{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:20px;
  padding:20px;
}

.card{
  background:#f5efe9;
  padding:15px;
  border-radius:12px;
}

.card h2{
  margin-top:0;
  text-align:center;
}

input, button{
  width:100%;
  padding:8px;
  margin:6px 0;
  border-radius:6px;
  border:1px solid #aaa;
}

button{
  background:#8b6f4e;
  color:white;
  border:none;
  cursor:pointer;
}

button:hover{
  background:#725a3e;
}

ul{
  padding-left:20px;
}
</style>
</head>

<body>

<h1>ç´€éŒ„é </h1>
<p style="text-align:center;">ä½ å¥½ï¼Œ<b id="userName"></b></p>

<div class="container">

<!-- æ’è¡Œæ¦œ -->
<div class="card">
  <h2>ğŸ† æ’è¡Œæ¦œ</h2>
  <ul id="rankList"></ul>
</div>

<!-- å’Œæœ‹å‹ä¸€èµ·ç© -->
<div class="card">
  <h2>ğŸ‘¥ å’Œæœ‹å‹ä¸€èµ·ç©</h2>
  <button onclick="createRoom()">å‰µå»ºæˆ¿é–“</button>
  <p id="roomCode"></p>

  <input id="joinRoomInput" placeholder="è¼¸å…¥æˆ¿é–“ä»£ç¢¼">
  <button onclick="joinRoom()">åŠ å…¥æˆ¿é–“</button>
</div>

<!-- å€‹äººç´€éŒ„ -->
<div class="card">
  <h2>ğŸ“ å€‹äººç´€éŒ„</h2>

  <label>æ™‚é–“</label>
  <input type="datetime-local" id="time">

  <label>å¦‚å»ç‹€æ³ï¼ˆä¸é †æš¢ â†’ é †æš¢ï¼‰</label>
  <input type="range" min="1" max="5" id="feel">

  <label>å‚™è¨»ï¼ˆéå¿…å¡«ï¼‰</label>
  <input id="note">

  <button onclick="addRecord()">æ–°å¢è³‡æ–™</button>

  <ul id="recordList"></ul>
</div>

<!-- å¸¸è¦‹å•é¡Œ -->
<div class="card">
  <h2>â“ å¸¸è¦‹å•é¡Œ</h2>
  <p>ä¾¿ç§˜å°èº«é«”çš„å±å®³</p>
  <p>1.çŸ­æœŸå½±éŸ¿</p>
  <p>â€¢ è…¹è„¹ã€ä¸èˆ’æœ</p>
  <p>â€¢ æ’ä¾¿ç”¨åŠ›ï¼Œè¦ºå¾—ç—›æˆ–ç–²ç´¯</p>
  <p>â€¢ é£Ÿæ…¾è®Šå·®ã€æ³¨æ„åŠ›ä¸‹é™</p>
  <p>2.é•·æœŸå½±éŸ¿</p>
  <p>â€¢ è…¸é“åŠŸèƒ½è®Šå·®</p>
  <p>â€¢ è®“äººç…©èºæˆ–ç„¦æ…®</p>
  <p>â€¢ é¤Šæˆæ†‹ä¾¿å£ç¿’æ…£</p>
</div>

</div>

<script>
// =======================
// ä½¿ç”¨è€…è³‡æ–™
// =======================
const nickname = localStorage.getItem("nickname") || "åŒ¿å";
document.getElementById("userName").innerText = nickname;

// =======================
// å‡æ’è¡Œæ¦œè³‡æ–™ï¼ˆå›ºå®šï¼‰
// =======================
let rankData = [
  {name:"æˆ‘æ˜¯å±ç‹å“ˆå“ˆå“ˆå“ˆå“ˆ", count:12},
  {name:"æ—chloe", count:11},
  {name:"æˆ‘æ‰æ˜¯å±ç‹", count:10},
  {name:"æå¼˜æ¯…ç´šæ£’å¤§é‡‘", count:9},
  {name:"ç‹ADEN", count:8},
  {name:"é»ƒLUCAS", count:7}
];

// è‡ªå·±çš„æ¬¡æ•¸
let myCount = 0;

// =======================
// é¡¯ç¤ºæ’è¡Œæ¦œ
// =======================
function updateRank(){
  let list = document.getElementById("rankList");
  list.innerHTML = "";

  // æŠŠè‡ªå·±åŠ å…¥æ’è¡Œæ¦œè³‡æ–™
  let allData = [...rankData, {name:nickname, count:myCount}];

  // æ’åº
  allData.sort((a,b)=>b.count - a.count);

  // é¡¯ç¤ºå‰ 10
  allData.slice(0,10).forEach(item=>{
    let li = document.createElement("li");
    li.innerText = `${item.name} - ${item.count} æ¬¡`;
    list.appendChild(li);
  });
}

// åˆå§‹é¡¯ç¤º
updateRank();

// =======================
// æ–°å¢ç´€éŒ„
// =======================
function addRecord(){
  let time = document.getElementById("time").value;
  let feel = document.getElementById("feel").value;
  let note = document.getElementById("note").value || "ç„¡";

  if(time === ""){
    alert("è«‹é¸æ“‡æ™‚é–“");
    return;
  }

  let li = document.createElement("li");
  li.innerText = `æ™‚é–“ï¼š${time}ï½œç‹€æ³ï¼š${feel}ï½œå‚™è¨»ï¼š${note}`;
  document.getElementById("recordList").appendChild(li);

  // æ¬¡æ•¸ +1
  myCount++;
  updateRank();

  // æ¸…ç©ºæ¬„ä½
  document.getElementById("time").value = "";
  document.getElementById("feel").value = 3;
  document.getElementById("note").value = "";
}

// =======================
// æˆ¿é–“åŠŸèƒ½
// =======================
function createRoom(){
  let code = Math.random().toString(36).substring(2,8).toUpperCase();
  localStorage.setItem("roomCode", code);
  document.getElementById("roomCode").innerText = "æˆ¿é–“ä»£ç¢¼ï¼š" + code;
}

function joinRoom(){
  let code = document.getElementById("joinRoomInput").value;
  if(code===""){
    alert("è«‹è¼¸å…¥æˆ¿é–“ä»£ç¢¼");
    return;
  }
  localStorage.setItem("roomCode", code);
  alert("å·²åŠ å…¥æˆ¿é–“ï¼š" + code);
}
</script>

</body>
</html>
